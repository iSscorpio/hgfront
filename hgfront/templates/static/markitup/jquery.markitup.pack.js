// ----------------------------------------------------------------------------
// markItUp! Universal MarkUp Engine, JQuery plugin
// v 1.0.2 beta
// Dual licensed under the MIT and GPL licenses.
// ----------------------------------------------------------------------------
// Copyright (C) 2007 Jay Salvat
// http://markitup.jaysalvat.com/
// ----------------------------------------------------------------------------
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(3($){$.3c.T=3(f,g){v k,s,z,L;k={24:"",1V:u,1P:u,2x:"",2t:"3E-8",2m:"",1X:"",2b:"",1s:"",22:"1Y",1u:"",1y:"",1p:{},1C:{},1z:{},1m:{},2z:[{}]};$.P(k,f,g);s=o;z=o;L=o;m M.1F(3(){v d,q,U,w,16,6,K,D,H,1c,1b,J;d=$(M);q=M;U=[];w=o;16=0;6=0;K=-1;3 1W(){d.1o(\'<1T G="\'+k.24+\'"></1T>\');d.1o(\'<C 1k="\'+(d.2u("1k")||"")+\'" G="T"></C>\');d.1o(\'<C G="2G"></C>\');d.2u("1k","").1O("2E");1c=$(\'<C G="2D"></C>\').2B(d);$(1J(k.2z)).1I(1c);2v=$(\'<C G="3I"></C>\').1E(d).1d("3G",3(e){v h=d.2r(),y=e.2q,1f,14;1f=3(e){d.1A("2r",3z.3w(20,e.2q+h-y)+"3v")};14=3(e){$("X").2j("2i",1f).2j("2g",14)};$("X").1d("2i",1f).1d("2g",14)});1b=$(\'<C G="3r"></C>\').1E(d);1b.2d(2v);d.1U(1v).3l(1v);d.1d("1t",3(e,a){2(a.1l!==o){11()}2(q==$.T.21){S(a)}});d.17(3(){$.T.21=M})}3 1J(b){v c=$("<Z></Z>"),i=0;$("E:29 > Z",c).1A("2X","p");$(b).1F(3(){v a=M,t="",W,E,j;W=(a.1B)?" [2P+"+a.1B+"]":"";2(a.2p){E=$(\'<E G="2K">\'+(a.2p||"")+\'</E>\').1I(c)}7{i++;1R(j=U.4-1;j>=0;j--){t+=U[j]+"-"}E=$(\'<E G="\'+(a.2F||"")+\' 1Q 1Q\'+t+(i)+\'"><a 1q="#" 1N="\'+(a.1B||"")+\'" W="\'+(a.1M+W||"")+\'">\'+(a.1M||"")+\'</a></E>\').26(3(e){2(a.1L){2C(a.1L)()}S(a);m o}).29(3(){$("> Z",M).1K()},3(){$("> Z",M).2A()}).1I(c);2(a.2y){U.3M(i);$(E).1O("3L").2d(1J(a.2y))}}});U.3K();m c}3 2w(c){2(c){c=c.3J();c=c.1i(/\\(\\!\\((.*?)\\)\\!\\)/1H,3(x,a){v b=a.1x("|!|");2(L===u){m(b[1]!==2s)?b[1]:b[0]}7{m(b[1]===2s)?"":b[0]}});c=c.1i(/\\[\\!\\[(.*?)\\]\\!\\]/1H,3(a){v b=a.1i(/(\\[\\!\\[|\\]\\!\\])/1H,"").1x(":!:");m 3H(b[0],(b[1])?b[1]:"")||""});m c}m""}3 B(a){2($.3F(a)){a=a(H)}m 2w(a)}3 12(a){A=B(D.A);Q=B(D.Q);R=B(D.R);I=B(D.I);2(R!==""){p=A+R+I}7 2(5===""&&Q!==""){p=A+Q+I}7{p=A+(a||5)+I}m{p:p,A:A,R:R,Q:Q,I:I}}3 S(a){v b,j,n,i;H=D=a;11();$.P(H,{1g:"",1G:q,5:(5||""),Q:a.Q,6:6});B(k.1u);B(D.1u);2(s===u&&z===u){B(D.3D)}$.P(H,{1g:1});2(s===u&&z===u){O=5.1x((($.1e.3C)?"\\n":"\\r\\n"));1R(j=0,n=O.4,i=0;i<n;i++){2($.3A(O[i])!==""){$.P(H,{1g:++j,5:O[i]});O[i]=12(O[i]).p}7{O[i]=""}}l={p:O.3x("\\n")};V=6;b=l.p.4+(($.1e.2n)?n:0)}7 2(s===u){l=12(5);V=6+l.A.4;b=l.p.4-l.A.4-l.I.4}7 2(z===u){l=12(5);V=6;b=l.p.4}7{l=12(5);V=6+l.p.4;b=0}2((5===""&&l.R==="")){2($.1e.2n){6+=(l.p.4-l.p.1i(/^\\n*/g,"").4)}V=6+l.A.4;b=l.p.4-l.A.4-l.I.4;K=d.F().15(6,d.F().4).4}$.P(H,{6:6});2l(l.p);1n(V,b);11();$.P(H,{1g:"",5:5});2(s===u&&z===u){B(D.3u)}B(D.1y);B(k.1y);2(w&&J&&k.1P){2k()}}3 2l(a){2(N.5){v b=N.5.1w();b.19=a}7{d.F(d.F().15(0,6)+a+d.F().15(6+5.4,d.F().4))}}3 1n(a,b){2(q.2h){Y=q.2h();Y.3s(u);Y.2f("1r",a);Y.3q("1r",b);Y.3p()}7 2(q.2c){q.2c(a,a+b)}q.2a=16;q.17()}3 11(){q.17();16=q.2a;2(N.5){5=N.5.1w().19;2($.1e.3o){v a=N.5.1w(),18=a.3m();18.3k(q);6=-1;3i(18.3h(a)){18.2f("1r");6++}}7{6=q.28}}7{6=q.28;5=d.F().15(6,q.3g)}m 5}3 27(){2(!w){2(k.1V===u){w=$(\'<25 G="3f"></25>\').1E(1b).1K();J=w[w.4-1].3e||3d[w.4-1]}7{J=3b.23("","27","3a=1Z, 39=1Z")}}7{2(L&&w){w.38();w=o;J=o}}}3 2k(){v b;2(k.1s!==""){$.37({1a:"36",35:o,34:k.1s,1Y:k.22+"="+3j(d.F()),33:3(a){b=a},32:3(){31("T! 3n: 30 2Z 2Y.")}})}7{b=\'<X>\\n<2o>\\n<2W 3t-2V="2e-1a" 2e="19/X; 2U=\'+k.2t+\'">\\n\';b+=\'<W></W>\\n<2T 1q="\'+k.2x+\'" />\\n<2S 1q="\'+k.2m+\'" 3y="2R" 1a="19/1A">\\n</2o>\\n\';b+=\'<1S 1k="\'+k.1X+\'" G="\'+k.2b+\'">\\n\'+d.F()+\'\\n</1S>\\n\';b+=\'</X>\'}J.N.23();J.N.2Q(b);3B(3(){J.N.2O()},2N);2(w===o){J.17()}}3 1v(e){z=e.z;L=e.L;s=(!(e.L&&e.s))?e.s:o;$.P(H,{s:s,z:z,L:L});2(e.1a=="1U"){2(s){v a=$("a[1N="+2M.2L(e.1h)+"]",1c);2(a.4!==0){s=o;a.2J("E").1D("26");e.2I();e.2H();m o}}2(e.1h===13||e.1h===10){2(s===u){s=o;S(k.1z);m k.1z.1j}7 2(z===u){z=o;S(k.1C);m k.1C.1j}7{S(k.1p);m k.1p.1j}}2(e.1h===9){2(K!=-1){11();K=d.F().4-K;1n(K,0);K=-1;m o}7{S(k.1m);K=-1;m k.1m.1j}}}}1W()})};$.T=3(a){v b={1l:o};$.P(b,a);2(b.1l){m $(b.1l).1F(3(){$("1G",M).1D("1t",[b])})}7{$("1G").1D("1t",[b])}}})(3N);',62,236,'||if|function|length|selection|caretPosition|else||||||||||||||string|return||false|block|textArea||ctrlKey||true|var|iFrame|||shiftKey|openWith|prepare|div|clicked|li|val|class|hash|closeWith|win|caretOffset|altKey|this|document|lines|extend|placeHolder|replaceWith|markup|markItUp|levels|start|title|html|range|ul||get|build||mouseUp|substring|scrollPosition|focus|rangeCopy|text|type|footer|header|bind|browser|mouseMove|line|keyCode|replace|keepDefault|id|target|onTab|set|wrap|onEnter|href|character|previewParserPath|insertion|beforeInsert|keyPressed|createRange|split|afterInsert|onCtrlEnter|css|key|onShiftEnter|trigger|insertAfter|each|textarea|gm|appendTo|dropMenus|show|call|name|accesskey|addClass|previewIFrameRefresh|markItUpButton|for|body|span|keydown|previewIFrame|init|previewBodyId|data|yes||focused|previewParserVar|open|nameSpace|iframe|click|preview|selectionStart|hover|scrollTop|previewBodyClassName|setSelectionRange|append|content|moveStart|mouseup|createTextRange|mousemove|unbind|refreshPeview|insert|previewCssPath|opera|head|separator|clientY|height|undefined|previewCharset|attr|resizeHandle|magicMarkups|previewBaseUrl|dropMenu|markupSet|hide|insertBefore|eval|markItUpHeader|markItUpEditor|className|markItUpContainer|stopPropagation|preventDefault|parent|markItUpSeparator|fromCharCode|String|100|close|Ctrl|write|stylesheet|link|base|charset|equiv|meta|display|found|not|Parser|alert|error|success|url|async|POST|ajax|remove|scrollbars|resizable|window|fn|frame|contentWindow|markItUpPreviewFrame|selectionEnd|inRange|while|escape|moveToElementText|keyup|duplicate|Error|msie|select|moveEnd|markItUpFooter|collapse|http|afterMultiInsert|px|max|join|rel|Math|trim|setTimeout|mozilla|beforeMultiInsert|utf|isFunction|mousedown|prompt|markItUpResizeHandle|toString|pop|markItUpDropMenu|push|jQuery'.split('|'),0,{}))